{{ define "main" }}
<article class="article-full">
    <header class="article-header">
        <h1 class="article-title">{{ .Title }}</h1>
        <div class="article-meta">
            <span><i class="fa-solid fa-calendar"></i> {{ .Date.Format "2006-01-02" }}</span>
            <span><i class="fa-solid fa-clock"></i> {{ .ReadingTime }} 分钟阅读</span>
            <span><i class="fa-solid fa-user"></i> {{ .Site.Params.author | default "作者" }}</span>
            {{ with .Params.categories }}
            <span><i class="fa-solid fa-folder"></i> {{ range . }}{{ . }}{{ end }}</span>
            {{ end }}
        </div>
    </header>

    <div class="article-content">
        {{ .Content }}
    </div>

    <footer class="article-footer">
        <div class="article-tags">
            {{ with .Params.tags }}
            <span><i class="fa-solid fa-tags"></i> 标签:</span>
            {{ range . }}
            <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="tag">{{ . }}</a>
            {{ end }}
            {{ end }}
        </div>

        <div class="article-share">
            <span><i class="fa-solid fa-share-nodes"></i> 分享:</span>
            <a href="#" onclick="shareToTwitter()" title="Twitter"><i class="fa-brands fa-twitter"></i></a>
            <a href="#" onclick="shareToFacebook()" title="Facebook"><i class="fa-brands fa-facebook"></i></a>
            <a href="#" onclick="shareToWeibo()" title="微博"><i class="fa-brands fa-weibo"></i></a>
        </div>

        <!-- 上一篇/下一篇 -->
        <div class="article-nav">
            {{ with .PrevInSection }}
            <a href="{{ .RelPermalink }}" class="nav-btn nav-prev">
                <i class="fa-solid fa-arrow-left"></i>
                <span>上一篇</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
            {{ end }}
            {{ with .NextInSection }}
            <a href="{{ .RelPermalink }}" class="nav-btn nav-next">
                <i class="fa-solid fa-arrow-right"></i>
                <span>下一篇</span>
                <span class="nav-title">{{ .Title }}</span>
            </a>
            {{ end }}
        </div>
    </footer>
</article>

<!-- Related Posts -->
{{ $related := .Site.RegularPages.Related . | first 3 }}
{{ with $related }}
<div class="related-posts">
    <h3><i class="fa-solid fa-link"></i> 相关文章</h3>
    <div class="related-posts-grid">
        {{ range . }}
        <div class="related-post">
            <h4><a href="{{ .RelPermalink }}">{{ .Title }}</a></h4>
            <p>{{ .Summary }}</p>
        </div>
        {{ end }}
    </div>
</div>
{{ end }}
{{ end }}

{{ define "scripts" }}
<script>
function shareToTwitter() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent(document.title);
    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
}

function shareToFacebook() {
    const url = encodeURIComponent(window.location.href);
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
}

function shareToWeibo() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent(document.title);
    window.open(`https://service.weibo.com/share/share.php?title=${text}&url=${url}`, '_blank');
}
</script>
{{ end }}
